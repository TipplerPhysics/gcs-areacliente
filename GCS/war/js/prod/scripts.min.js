/*! BBVA-global-customer-solutions - v0.0.1 - 2014-08-01 */function resetForm($form){$form.find("input").each(function(){"text"==$(this).attr("type")?$(this).val(""):("radio"==$(this).attr("type")||"checkbox"==$(this).attr("type"))&&($(this).prop("checked",!1),$(this).parent().find("label").removeClass("checked"))}),$form.find("textarea").each(function(){$(this).val("")});var $selects=$form.find("select"),selectTotal=$selects.length;$selects.each(function(i){$(this).find("option:eq(0)").prop("selected",!0),i===selectTotal-1&&$form.find(".selectpicker").selectpicker("refresh")});var validator=$form.validate();validator.resetForm(),$form.find(".bootstrap-select.error").removeClass("error")}function generateRow(data,id,permiso,permisoid,dto,area){var nombre=(data.split("&"),$("#nombre").val()),ap1=$("#ap1").val(),ap2=$("#ap2").val(),email=$("#email").val(),html="<tr id=row"+id+" class='valid-result' data-dto='"+dto+"' data-mail='"+email+"' data-permiso='"+permisoid+"' data-area='"+area+"'><td><span>"+nombre+"</span></td><td><span>"+ap1+"</span></td><td><span>"+ap2+"</span></td><td><span>"+dto+"</span></td><td><span>"+permiso+"</span></td><td><img class='vs' src='../img/vs.png'><a class='lapiz' id='lapiz"+id+"' name="+id+"></a><a class='papelera' id='papelera"+id+"' name="+id+" data-toggle='modal' data-target='#confirm-delete'> </a></td></tr>";return html}function updateRow(id){for(var celdas=$("#row"+id).children(),a=0;celdas.length-3>=a;a++){var $celda=$(celdas[a]),span=$celda.children().val();$celda.children().remove(),$celda.prepend("<span>"+span+"</span>")}var $celda=$(celdas[4]),span=$celda.children().find(":selected").text();$celda.children().remove(),$celda.prepend("<span>"+span+"</span>"),$("#lapiz"+id).removeClass("inactive"),$("#papelera"+id).removeClass("inactive")}function undoRow(id,arr){$("#papelera"+id).attr("data-toggle"),$("#row"+id).removeClass("editing");var dto=$("#dto_ed option:selected").text(),perfil=$("#permiso_ed option:selected").text();$(".extended-row").remove();for(var celdas=$("#row"+id).children(),a=0;celdas.length-4>=a;a++){{var $celda=$(celdas[a]);$celda.children().val()}$celda.children().remove(),$celda.prepend("<span>"+arr[a]+"</span>")}$celda=$(celdas[3]),$celda.children().remove(),$celda.prepend("<span>"+dto+"</span>"),$celda=$(celdas[4]),$celda.children().remove(),$celda.prepend("<span>"+perfil+"</span>"),$("#lapiz"+id).removeClass("inactive"),$("#papelera"+id).removeClass("inactive")}function undoEditRow(id){$("#row"+id).removeClass("editing"),$(".extended-row").remove(),updateRow(id)}function generateChecks(pagina){$.get("../html/"+pagina,null,function(result){$(".extended-div").html(result)},"html")}function editRow(id){var $currentRow=$("#row"+id),$table=$currentRow.closest("table"),$previousOpenEdit=$table.find("#edit-item-holder");areas=$currentRow.attr("data-area"),-1!=areas.indexOf("Global Customer Service")&&(areas=areas.replace("Global Customer Service","gcs")),-1!=areas.indexOf("Global Product")&&(areas=areas.replace("Global Product","globalproduct")),areas=areas.split("_"),dto=$currentRow.attr("data-dto");var celdas=$currentRow.children();cnombre=$(celdas[0]).children().html(),cap1=$(celdas[1]).children().html(),cap2=$(celdas[2]).children().html(),cemail=$(celdas[3]).children().html(),cpermiso=$currentRow.attr("data-permiso");var email=$currentRow.attr("data-mail");$.get("../html/extended-user.html",null,function(result){$previousOpenEdit.length>0&&($("#row"+$previousOpenEdit.data("row-id")).css({display:"table-row"}),$previousOpenEdit.remove()),$currentRow.css({display:"none"}),$currentRow.after("<tr id='edit-item-holder' class='extended-row' style='display: table-row;'><td colspan='6'><div class='extended-div'></div></td></tr>");var $currentOpenEdit=$table.find("#edit-item-holder");$currentOpenEdit.data("row-id",id),$(".extended-div").html(result);var $editForm=$("#edit-item-holder").find("form#edit-item"),$dtoOptions=$("select#dto_select option").clone();$editForm.find("select#dto_ed").append($dtoOptions).val(dto),$editForm.find("select#dto_ed option").first().remove();var $permisoOptions=$("select#permiso_select option").clone();$editForm.find("select#permiso_ed").append($permisoOptions).val(cpermiso),$editForm.find("select#permiso_ed option").first().remove(),$editForm.find(".edit_input.nombre").val(cnombre),$editForm.find(".edit_input.apellido1").val(cap1),$editForm.find(".edit_input.apellido2").val(cap2),$editForm.find(".edit_input.email").val(email),$.each(areas,function(i,value){$editForm.find(".areas").find(".radio-container").each(function(){var input=$(this).find("input#e-"+value);input.length>0&&(input.prop("checked",!0),$(this).find("label").addClass("checked"))})}),$editForm.find(".selectpicker").selectpicker(),initForms(),initValidator(),$editForm.on("click",".cancelar-ext",function(){return $("#row"+$currentOpenEdit.data("row-id")).css({display:"table-row"}),$currentOpenEdit.remove(),!1}),$editForm.on("click",".guardar-ext",function(){if($editForm.valid()){var $editItemHolder=$(this).closest("#edit-item-holder"),id=$editItemHolder.data("row-id"),nombre=$editItemHolder.find("input.edit_input.nombre").val(),ap1=$editItemHolder.find("input.edit_input.apellido1").val(),ap2=$editItemHolder.find("input.edit_input.apellido2").val(),email=$editItemHolder.find("input.edit_input.email").val(),permiso=$("#permiso_ed").val(),dto=$("#dto_ed option:selected").text();dto=dto.replace("&","#");var $checkedBoxes=$editItemHolder.find(".areas").find(".radio-container").find("input:checked"),areas="";$checkedBoxes.each(function(i){areas+=$(this).val(),i<$checkedBoxes.length-1&&(areas+="_")});var postData="&nombre="+nombre+"&id="+id+"&dto="+dto+"&permiso="+permiso+"&email="+email+"&ap1="+ap1+"&ap2="+ap2+"&accion=update&areas="+areas,formURL="/usersServlet";$.ajax({url:formURL,type:"POST",data:postData,success:function(){location.reload()}})}return!1})},"html")}var url=document.URL;url=url.indexOf("localhost")>1?"http://localhost:8888":"http://gcs-areacliente.appspot.com";var opciones_estado="<option value='PDTE Doc Alcance en GCS'>PDTE Doc Alcance en GCS</option><option value='P-950 en confecci&oacute;n'>P-950 en confección</option><option value='PDTE Valoración IT'>PDTE Valoración IT</option><option value='PDTE Plan de Trabajo IT'>PDTE Plan de Trabajo IT</option><option value='PDTE Visto Bueno del CL del plan de trabajo'>PDTE Visto Bueno del CL del plan de trabajo</option><option value='En Desarrollo'>En Desarrollo</option><option value='En Test - Conectividad'>En Test - Conectividad</option><option value='En Test - Integración'>En Test - Integración</option><option value='En Test - Aceptación'>En Test - Aceptación</option><option value='Parado por Negocio - Producto'>Parado por Negocio - Producto</option><option value='Parado por Negocio'>Parado por Negocio</option><option value='Parado por IT'>Parado por IT</option><option value='Excluido por Negocio'>Excluido por Negocio</option><option value='Excluido por Timeout'>Excluido por Timeout</option><option value='PDTE Implantar'>PDTE Implantar</option><option value='En Penny Test'>En Penny Test</option><option value='Implementado con OK'>Implementado con OK</option><option value='Implementado sin OK'>Implementado sin OK</option>";$(function(){function getDemandaData(){var params="",motivo_catalogacion=$("#motivo_catalogacion").val(),comentarios=$("#comentarios").val();return params="&motivo_calogacion="+motivo_catalogacion+"&comentarios="+comentarios}function undoRowDemanda(id){$("#papelera"+id).attr("data-toggle"),$("#row"+id).removeClass("editing"),$(".extended-row").remove();for(var celdas=$("#row"+id).children(),a=0;celdas.length-4>=a;a++){var $celda=$(celdas[a]),span=$celda.children().val();$celda.children().remove(),$celda.prepend("<span>"+span+"</span>")}$celda=$(celdas[2]),$celda.children().remove(),$celda.prepend("<span>"+tipoini+"</span>"),$celda=$(celdas[3]),$celda.children().remove(),$celda.prepend("<span>"+estadoini+"</span>"),$("#lapiz"+id).removeClass("inactive"),$("#papelera"+id).removeClass("inactive")}function generateRowDemanda(postData,data){var fecha_entrada=$("#fecha_entrada_peticion").val(),cliente=$("#cliente option:selected").val(),tipo=$("#tipo option:selected").val(),estado=$("#estado option:selected").val(),cod_peticion=data.cod_peticion,id=data.id,html="<tr id=row"+id+" class='valid-result'><td><span>"+fecha_entrada+"</span></td><td><span>"+cliente+"</span></td><td><span>"+tipo+"</span></td><td><span>"+estado+"</span></td><td><span>"+cod_peticion+"</span></td><td><img class='vs' src='../img/vs.png'><a class='papelera' id='papelera"+id+"' name="+id+" data-toggle='modal' data-target='#confirm-delete'> </a><a class='lapiz' id='lapiz"+id+"' name="+id+"></a></td></tr>";return html}function editRowDemanda(id){$("#papelera"+id).removeAttr("data-toggle"),$("#row"+id).addClass("editing"),$("#row"+id).attr("name",id),$("#row"+id).after("<tr class='extended-row' style='display: table-row;'><td colspan='6'><div class='extended-div'></div></td></tr>"),generateChecks("extended-demanda.html","extended-div");var celdas=$("#row"+id).children();cnombre=$(celdas[0]).children().html();for(var a=0;celdas.length-5>=a;a++){var $celda=$(celdas[a]),span=$celda.children().html();$celda.children().remove(),-1!=span.indexOf("&amp;")&&(span=span.replace("&amp;","&")),$celda.prepend("<input type='text' class='edit_input col"+id+"' value='"+span+"'>")}var $celda=$(celdas[2]);tipoini=$celda.children().html(),$celda.children().remove(),$celda.prepend("<select name='tipo_ed' id='tipo_ed' class='selectpicker tipo_ed'><option value='CIB'>CIB</option><option value='BEC'>BEC</option></select>"),$("#tipo_ed").val(tipoini),$celda=$(celdas[3]),estadoini=$celda.children().html(),$celda.children().remove(),$celda.prepend("<select name='estado_ed' id='estado_ed' class='selectpicker estado_ed'>"+opciones_estado+"</select>"),$("#estado_ed").val(estadoini),$("#lapiz"+id).addClass("inactive"),$("#papelera"+id).addClass("inactive"),setTimeout(function(){$("#fecha_entrada_peticion_ext").val($("#row"+id).attr("data-fecha-entrada"));for(var gestores_it=$("#row"+id).attr("data-gestores-list").split("-"),ges_it=$("#row"+id).attr("data-gestor-asig").split("-"),data_time=$("#row"+id).attr("data-hora-entrada").split("-")[0],hora=data_time.split(":")[0],minutos=data_time.split(":")[1],$gestoresSelect=$("#gestor_it_ext"),a=0;a<gestores_it.length-1;a++){var gestor_name=gestores_it[a].split("(")[0],gestor_id=gestores_it[a].split("(")[1].split(")")[0];$gestoresSelect.append("<option value='"+gestor_id+"'>"+gestor_name+"</option>")}$(".selectpicker").selectpicker("refresh"),$("#gestor_it_ext").val(ges_it),$("#hora_peticion_ext").val(hora),$("#min_peticion_ext").val(minutos),$(".selectpicker").selectpicker("render")},750)}var tipoini="",estadoini="";$(".gestion_demanda").on("click",".lapiz",function(){var id=$(this).attr("name");$(this).hasClass("inactive")||editRowDemanda(id)}),$(".gestion_demanda").on("click",".cancelar-ext-demanda",function(){var id=$(".editing").attr("name");$("#papelera"+id).attr("data-toggle","modal"),undoRowDemanda(id)}),$("#myTable").on("click",".guardar-ext-demanda",function(){var id=$(".editing").attr("name"),campo=$(".col"+id),$fila=$("#row"+id),fecha=$(campo[0]).val(),cliente=$(campo[1]).val(),tipo=$("#tipo_ed option:selected").val(),estado=$("#estado_ed option:selected").val(),gestor_it=$("#gestor_it_ext option:selected").val(),fecha_entrada=$("#fecha_entrada_peticion_ext").val(),hora_peticion_ext=$("#hora_peticion_ext option:selected").val(),min_peticion_ext=$("#min_peticion_ext option:selected").val();$fila.attr("data-gestor-asig",gestor_it),$fila.attr("data-fecha-entrada",fecha_entrada),$fila.attr("data-hora-entrada",hora_peticion_ext+":"+min_peticion_ext);var postData="fecha_entrada="+fecha+"&cliente="+cliente+"&tipo="+tipo+"&estado="+estado+"&gestor_it="+gestor_it+"&fecha_asignacion="+fecha_entrada+"&hora_peticion_ext="+hora_peticion_ext+"&accion=update&min_peticion_ext="+min_peticion_ext+"&id="+id,formURL="/demandaServlet";$.ajax({url:formURL,type:"POST",data:postData,success:function(){location.reload()}}),$("#papelera"+id).attr("data-toggle","modal")}),$(".gestion_demanda").on("click",".papelera",function(){$("#deleteDemanda").attr("name",$(this).attr("name"))}),$("#deleteDemanda").on("click",function(){var id=$(this).attr("name"),formURL="/demandaServlet?",postData="accion=delete&id="+id;$.ajax({url:formURL,type:"POST",data:postData,success:function(){$("#row"+id).fadeOut("slow"),$("#confirm-delete").modal("hide")}})}),$("#submit_demanda_form").on("click",function(e){e.preventDefault();var $form=$("#new-demanda-form"),params=getDemandaData($form);if($form.valid()){var postData=$form.serialize()+params+"&accion=new",formURL=$form.attr("action");$.ajax({url:formURL,type:"GET",data:postData,success:function(data){if("true"==data.success){var html=generateRowDemanda(postData,data);$("#myTable").prepend(html),$("#myTable").paginateMe({pagerSelector:"#myPager",showPrevNext:!0,hidePageNumbers:!1,perPage:5}),$("#message_div").removeClass("error").addClass("success"),$(".new-user-form-holder").height()<190&&$(".new-user-form-holder").height($(".new-user-form-holder").height()+35),$("#span_message").html("El usuario ha sido creado de forma correcta."),$("#message_div").css("display","block"),resetForm($form),setTimeout(function(){$("#message_div").fadeOut("slow",function(){$("#span_message").html("")})},5e3)}else $("#message_div").removeClass("success").addClass("error"),$(".new-user-form-holder").height()<190&&$(".new-user-form-holder").height($(".new-user-form-holder").height()+35),$("#span_message").html(data.error),$("#message_div").css("display","block")},error:function(jqXHR,textStatus,errorThrown){errorThrown.length>0&&($("#span_message").html(errorThrown),$("#message_div").addClass("error").removeClass("success"))}})}return!1})});var initForms=function(){$("form").parent().find("button.close-form").off(".close-form").on("click.close-form",function(){$(this).parent().find("form");return $("#newUserButton").trigger("click"),!1}),$("form").find(".radio-container").each(function(){var $checkbox=$(this).find('input[type="checkbox"]'),$label=$(this).find("label");$checkbox.prop("checked")&&$label.addClass("checked"),$label.off(".check-label").on("click.check-label",function(){$(this).toggleClass("checked")})})};$(function(){initForms()}),$(function(){$("form").find(".datepicker").each(function(){var $datepicker=$(this);if($datepicker.hasClass("datefuture")?$datepicker.datepicker({minDate:0}):$datepicker.hasClass("datepast")?$datepicker.datepicker({maxDate:0}):$datepicker.datepicker(),$datepicker.hasClass("fromTo")){var $targetDatepicker=$("#"+$datepicker.data("target-id"));$datepicker.on("change.fromTo",function(){$targetDatepicker.datepicker("option","minDate",$datepicker.datepicker("getDate"))})}}),$("form").find(".selectpicker").selectpicker()}),$.fn.paginateMe=function(opts){function previous(){var goToPage=parseInt(pager.data("curr"))-1;goTo(goToPage)}function next(){goToPage=parseInt(pager.data("curr"))+1,goTo(goToPage)}function goTo(page){var startAt=page*perPage,endOn=startAt+perPage;children.css("display","none").slice(startAt,endOn).show(),page>=1?pager.find(".prev_link").show():pager.find(".prev_link").hide(),numPages-1>page?pager.find(".next_link").show():pager.find(".next_link").hide(),pager.data("curr",page),settings.numbersPerPage>1&&($(".page_link").hide(),$(".page_link").slice(page,settings.numbersPerPage+page).show()),pager.children().removeClass("active"),pager.children().eq(page+1).addClass("active")}var $this=this,defaults={perPage:5,showPrevNext:!1,numbersPerPage:5,hidePageNumbers:!1},settings=$.extend(defaults,opts),listElement=$this,perPage=settings.perPage,children=listElement.find(".valid-result"),pager=$(".pagination");"undefined"!=typeof settings.childSelector&&(children=listElement.find(settings.childSelector)),"undefined"!=typeof settings.pagerSelector&&(pager=$(settings.pagerSelector));var numItems=children.size(),numPages=Math.ceil(numItems/perPage);$(pager).html(""),pager.data("curr",0),settings.showPrevNext&&$('<li><a href="#" class="prev_link"><</a></li>').appendTo(pager);for(var curr=0;numPages>curr&&0==settings.hidePageNumbers;)$('<li><a href="#" class="page_link">'+(curr+1)+"</a></li>").appendTo(pager),curr++;settings.numbersPerPage>1&&($(".page_link").hide(),$(".page_link").slice(pager.data("curr"),settings.numbersPerPage).show()),settings.showPrevNext&&$('<li><a href="#" class="next_link">></a></li>').appendTo(pager),pager.find(".page_link:first").addClass("active"),pager.find(".prev_link").hide(),1>=numPages&&pager.find(".next_link").hide(),pager.children().eq(1).addClass("active"),children.hide(),children.slice(0,perPage).show(),pager.find("li .page_link").click(function(){var clickedPage=$(this).html().valueOf()-1;return goTo(clickedPage,perPage),!1}),pager.find("li .prev_link").click(function(){return previous(),!1}),pager.find("li .next_link").click(function(){return next(),!1})};var normalize=function(){for(var from="ÃÀÁÄÂÈÉËÊÌÍÏÎÒÓÖÔÙÚÜÛãàáäâèéëêìíïîòóöôùúüûÑñÇç",to="AAAAAEEEEIIIIOOOOUUUUaaaaaeeeeiiiioooouuuunncc",mapping={},i=0,j=from.length;j>i;i++)mapping[from.charAt(i)]=to.charAt(i);return function(str){for(var ret=[],i=0,j=str.length;j>i;i++){var c=str.charAt(i);ret.push(mapping.hasOwnProperty(str.charAt(i))?mapping[c]:c)}return ret.join("")}}();$(function(){$(".search").on("keyup",function(e){var $table=$(this).closest("table").find("tbody").first(),$table_results=$table.children(),$current_input=$(this);$(this).closest("tr").find(".search-th").find("input").each(function(){$(this).is($current_input)||0==$(this).val().length||(console.log("multi"),multipleFilter=!0)});for(var e=0;e<$table_results.length;e++){var isValid=!0,$linea=$($table_results[e]);$(this).closest("tr").find(".search-th").find("input").each(function(){if(0!=$(this).val().length){var text=normalize($(this).val().toLowerCase()),columna=$(this).attr("class").split("col")[1],cont=$($linea.children()[columna]).children().html().toLowerCase(),textLength=text.length;text!=cont.substring(0,textLength)&&(isValid=!1)}}),isValid?$linea.show().addClass("valid-result"):$linea.hide().removeClass("valid-result")}$table.paginateMe({pagerSelector:"#myPager",showPrevNext:!0,hidePageNumbers:!1,perPage:5})})}),$(function(){$("#sidebar").hover(function(){$(this).addClass("hovering")},function(){$(this).removeClass("hovering")})});var cnombre="",cap1="",cap2="",cemail="",cpermiso="",areas,dto;$(function(){$("#myTable").paginateMe({pagerSelector:"#myPager",showPrevNext:!0,hidePageNumbers:!1,perPage:5}),$(".selectpicker").selectpicker();var userBoxSize=0;$("#newUserButton").click(function(){var $newUserButton=$(this);$newUserButton.hasClass("white-btn")?"visible"==$(".new-user-form-holder").css("overflow")&&($(".new-user-form-holder").css("overflow","hidden"),userBoxSize=$(".new-user-form-holder.open").outerHeight(),$(".new-user-form-holder.open").css("height",userBoxSize),setTimeout(function(){$(".new-user-form-holder.open").removeClass("open").css("height","0px")},25),setTimeout(function(){$("#newUserButton").removeClass("white-btn"),$(".user_span").removeClass("blue"),$(".demanda_span").removeClass("blue");var $form=$newUserButton.parent().find("form");resetForm($form)},1e3)):"hidden"==$(".new-user-form-holder").css("overflow")&&($("#newUserButton").addClass("white-btn"),$(".user_span").addClass("blue"),$(".demanda_span").addClass("blue"),$(".new-user-form-holder").addClass("open"),userBoxSize>0&&setTimeout(function(){$(".new-user-form-holder").css("height",userBoxSize)},25),setTimeout(function(){$(".new-user-form-holder.open").css("height","auto")},1e3),setTimeout(function(){$(".new-user-form-holder").css("overflow","visible")},1e3))}),$("#confirm-delete").on("show.bs.modal",function(e){$(this).find(".danger").attr("href",$(e.relatedTarget).data("href"))}),$(".alta_usuario").on("click",".papelera",function(){$("#deleteUser").attr("name",$(this).attr("name"))}),$("#deleteUser").on("click",function(){var id=$(this).attr("name"),formURL="/usersServlet?",postData="accion=delete&id="+id;$.ajax({url:formURL,type:"POST",data:postData,success:function(){$("#row"+id).fadeOut("fast",function(){$(this).remove(),$("#myTable").paginateMe({pagerSelector:"#myPager",showPrevNext:!0,hidePageNumbers:!1,perPage:5})}),$("#confirm-delete").modal("hide")}})}),$(".alta_usuario").on("click",".lapiz",function(){var id=$(this).attr("name");$(this).hasClass("inactive")||editRow(id)}),$("#submit_user_form").on("click",function(e){e.preventDefault();var $form=$("#new-user-form");if($form.valid()){var areas="",$checkedBoxes=$form.find(".radio-container-holder").find(".radio-container").find("input:checked");$checkedBoxes.each(function(i){areas+=$(this).val(),i<$checkedBoxes.length-1&&(areas+="_")});var postData=$form.serialize()+"&accion=new&areasStr="+areas,formURL=$form.attr("action");$.ajax({url:formURL,type:"GET",data:postData,success:function(data){"true"==data.success?($(".new-user-form-holder").height()<190&&$(".new-user-form-holder").height($(".new-user-form-holder").height()+35),$form.find(".form-container").find("div:not(#message_div)").hide(0),$form.find("#span_message").html("El usuario ha sido creado de forma correcta.<br/>En breve volvemos a la pagina."),$("#message_div").css("display","block").removeClass("error").addClass("success"),setTimeout(function(){resetForm($form),location.reload()},1500)):($("#message_div").removeClass("success").addClass("error"),$(".new-user-form-holder").height()<190&&$(".new-user-form-holder").height($(".new-user-form-holder").height()+35),$("#span_message").html(data.error),$("#message_div").css("display","block"))},error:function(jqXHR,textStatus,errorThrown){errorThrown.length>0&&($("#span_message").html(errorThrown),$("#message_div").addClass("error").removeClass("success"))}})}return!1})}),$(function(){$.extend($.validator.messages,{required:"Este campo es obligatorio.",remote:"Por favor, rellena este campo.",email:"Por favor, escribe una direcci&oacuten de correo v&aacutelida.",url:"Por favor, escribe una URL válida.",date:"Por favor, escribe una fecha válida.",dateISO:"Por favor, escribe una fecha (ISO) válida.",number:"Por favor, escribe un n&uacutemero v&aacutelido.",digits:"Por favor, escribe s&oacutelo dígitos.",creditcard:"Por favor, escribe un número de tarjeta válido.",equalTo:"Por favor, escribe el mismo valor de nuevo.",extension:"Por favor, escribe un valor con una extensión aceptada.",maxlength:$.validator.format("Por favor, no escribas más de {0} caracteres."),minlength:$.validator.format("Por favor, no escribas menos de {0} caracteres."),rangelength:$.validator.format("Por favor, escribe un valor entre {0} y {1} caracteres."),range:$.validator.format("Por favor, escribe un valor entre {0} y {1}."),max:$.validator.format("Por favor, escribe un valor menor o igual a {0}."),min:$.validator.format("Por favor, escribe un valor mayor o igual a {0}."),nifES:"Por favor, escribe un NIF válido.",nieES:"Por favor, escribe un NIE válido.",cifES:"Por favor, escribe un CIF válido."}),$.validator.addMethod("selected",function(value,element){var valid=!1;return"default"!=value?(valid=!0,$(element).parent().find(".bootstrap-select").removeClass("error")):$(element).parent().find(".bootstrap-select").addClass("error"),valid},"Por favor, selecciona un valor."),$.validator.addMethod("require-one",function(value,element){var valid=!1,selector="input[name="+$(element).attr("name")+"]";return $(element).closest("form").find(selector).each(function(){$(this).is(":checked")&&(valid=!0)}),valid},"Por favor, selecciona una opci&oacute;n."),initValidator()});var initValidator=function(){$("form").each(function(){$(this).validate({ignore:":hidden:not(select):not([type='radio']):not([type='checkbox'])",focusCleanup:!1,onkeyup:!1,submitHandler:function(form){form.submit()},errorPlacement:function(error,$element){var $target=$element.parent();$target.find(".error-messages").remove();var $container="";if($element.hasClass("selectpicker")&&($element=$target.find(".bootstrap-select")),($element.is(":checkbox")||$element.is(":radio"))&&$element.parent().hasClass("radio-container")){var $target=$element.closest(".radio-container-holder"),$container=$target.find("#error-messages");0==$container.length&&($container=$('<div id="error-messages" class="block-error server-errors"><ul></ul></div>'),$element.closest(".radio-container-holder").prepend($container));var $errorelement=$("<li>");$errorelement.append(error),$container.find("ul").append($errorelement)}else $container=$('<div class="error-messages"><ul></ul></div>'),$target.css({position:"relative"}).prepend($container);var $errorelement=$("<li>");$errorelement.append(error),$container.find("ul").append($errorelement);var leftPosition=0;$element.outerWidth()<$container.outerWidth()?leftPosition=($element.outerWidth()-$container.outerWidth())/2:$element.outerWidth()>$container.outerWidth()&&(leftPosition=($element.outerWidth()-$container.outerWidth())/2),$container.css({left:$element.position().left+leftPosition+"px",marginLeft:$element.css("margin-left"),maxWidth:"200px"}),$container.css({top:"-"+($container.outerHeight()+10)+"px"}),$element.hover(function(){$container.addClass("hover")},function(){$container.removeClass("hover")})},success:function(label){label.closest(".error-messages").remove()}})})};